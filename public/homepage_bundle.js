(()=>{var e={300:(e,t)=>{"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},11:(e,t,n)=>{const a=n(300),r=(n(563),n(309)),s=n(971),o=function(){const e=({endpoint:e,singleCharacter:r}={},s=(()=>{}))=>a("https://rickandmortyapi.com/api"+e).then((e=>e.json())).then((e=>function(e,a){try{a?(e.gender=t(e.gender),e.status=n(e.status)):e.results.forEach((e=>{e.gender=t(e.gender),e.status=n(e.status)}))}catch(e){console.error(e)}return Promise.resolve().then((()=>e))}(e,r))).then((e=>s(e))).catch((e=>(console.error(e),this.onFetchErrorCallback(),e)));function t(e){switch(e.toLowerCase()){case"male":return s.character.gender.MALE;case"female":return s.character.gender.FEMALE;case"genderless":return s.character.gender.GENDERLESS;case"unknown":return s.character.gender.UNKNOWN;default:return""}}function n(e){switch(e.toLowerCase()){case"alive":return s.character.status.ALIVE;case"dead":return s.character.status.DEAD;case"unknown":return s.character.status.UNKNOWN;default:return""}}return{init:function({onFetchErrorCallback:e}){this.onFetchErrorCallback=e},consume:e,fetchCharacter:t=>e({endpoint:`/character/${t}`,singleCharacter:!0},(e=>r(e))),fetchCharactersPage:({page:t}={})=>{let n="/character";return Number(t)&&t>1&&t<=34&&(n+=`?page=${t}`),e({endpoint:n},(e=>{const t=e.results.map((e=>r(e)));return{pageInfo:e.info,characters:t}}))}}}();e.exports=o},563:e=>{e.exports=class{constructor({id:e,name:t,status:n,gender:a,location:r,episodes:s,avatarUrl:o,species:c}={}){this._id=e,this._name=t,this._status=n,this._gender=a,this._location=r,this._episodes=s,this._avatarUrl=o,this._species=c}get id(){return this._id}get name(){return this._name}get status(){return this._status}get gender(){return this._gender}get location(){return this._location}get episodes(){return this._episodes}get avatarUrl(){return this._avatarUrl}get species(){return this._species}}},309:(e,t,n)=>{const a=n(563);e.exports=e=>{const{id:t,name:n,status:r,gender:s,location:o,episode:c,image:i,species:d}=e;return new a({id:t,name:n,status:r,gender:s,location:o.name,episodes:c,avatarUrl:i,species:d})}},971:e=>{e.exports={character:{gender:{MALE:"Male",FEMALE:"Female",GENDERLESS:"Genderless",UNKNOWN:"Unknown"},status:{ALIVE:"Alive",DEAD:"Dead",UNKNOWN:"Unknown"}}}},215:(e,t,n)=>{n(563);const a=n(971),{getQuerystringParams:r}=n(174),s=function(){function e(e){let t="";switch(e){case a.character.status.ALIVE:t+="status-alive";break;case a.character.status.DEAD:t+="status-dead";break;case a.character.status.UNKNOWN:t+="status-unknown"}return t}function t(e,t){if(document.querySelectorAll(e).forEach((e=>e.disabled=!t)),t){const n=r(t.split("?")[1]).page;document.querySelectorAll(e).forEach((e=>e.setAttribute("data-target-page",n)))}}return{init:function({openModalCallback:e,closeModalCallback:t}){this.openModalCallback=e,this.closeModalCallback=t},displayGridLoadingState:function({isLoading:e}={isLoading:!1}){document.querySelector("section.characters-container").classList.toggle("loading",e)},renderGrid:function({characters:t,error:n}){if(!n&&!t)throw new Error("Renderer.renderGrid() : called with invalid argument");if(n)document.querySelector(".characters-grid").classList.add("error"),document.querySelector(".characters-grid").innerHTML="<p>There was an error while fetching the characters.</p>\n                <p>Please try again later.</p>";else{const n=t.map((t=>function(t){return`<div class="character-card js-character-card" data-character-id="${t.id}">\n                <img src="${t.avatarUrl}" alt="${t.name}" />\n                <div class="details">\n                    <div class="title">${t.name}</div>\n                    <div class="info">\n                        <span class="status ${e(t.status)}"></span>\n                        <span>${t.status} - ${t.species}</span>\n                    </div>\n                </div>                \n            </div>`}(t))).reduce(((e,t)=>`${e}\n                        ${t}`),"");document.querySelector(".characters-grid").classList.remove("error"),document.querySelector(".characters-grid").innerHTML=n}},renderModal:function(t,n){if("character"===t&&!n)throw new Error("Renderer.renderModal(): no character object provided.");let r;switch(t){case"character":r=`<div class="character">\n                        <img src="${n.avatarUrl}" alt="${n.name}"/>\n                        <h3>${n.name}</h3>\n                        <p>\n                            <span class="status ${e(n.status)}"></span>\n                            <span>${n.status} - ${n.species}</span>\n                        </p>\n                    </div>\n                    <div class="character-info">\n                        <p>Gender: ${function(e){switch(e){case a.character.gender.MALE:return'<span class="icon-male"></span>';case a.character.gender.FEMALE:return'<span class="icon-female"></span>';case a.character.gender.GENDERLESS:case a.character.gender.UNKNOWN:default:return""}}(n.gender)} ${n.gender}</p>\n                        <p>Last seen location: ${n.location}</p>\n                        <p>Number of episodes appeared: ${n.episodes.length}</p>\n                    </div>`;break;case"info":r='<div class="app-info">\n                        <h2>Rick and Morty API Consumer</h2>\n                        <hr/>\n                        <p>A web app that consumes the <a href="https://rickandmortyapi.com/">Rick and Morty API</a> and renders characters with their information.</p>\n                        <p>Repo link: <a href="https://github.com/GeorgeMitrakis/rick-and-morty-api-consumer">here</a></p>\n                        <p>App author: <a href="https://www.linkedin.com/in/george-mitrakis-867b74191/">George Mitrakis</a></p>\n                        <p>UX designer, requirements author: <a href="https://www.linkedin.com/in/epaminondas-fakopoulos-751a03207/">Nondas Fakopoulos</a></p>\n                        <hr/>\n                        <p>\n                            The following icons from \n                            <a href="https://fontawesome.com/"> fontawesome.com </a>\n                            were used, under the \n                            <a href="https://fontawesome.com/license">Creative Commons Attribution 4.0 International license </a>:\n                        </p>\n                        <ul>\n                            <li>mars-solid (path color changed)</li>\n                            <li>venus-solid (path color changed)</li>\n                            <li>info-circle-solid (path color changed)</li>\n                        </ul>\n\n                    </div>';break;case"loading":default:r="<p>Loading...</p>"}document.querySelector("#modal .modal-content").innerHTML=r},openModal:function(){document.querySelector("#modal").classList.add("opened"),this.openModalCallback()},closeModal:function(){document.querySelector("#modal").classList.remove("opened"),document.querySelector("#modal .modal-content").innerHTML="",this.closeModalCallback()},preparePaginationButtons:function({prev:e,next:n}){t(".js-previous",e),t(".js-next",n)}}}();e.exports=s},174:e=>{e.exports={getQuerystringParams:function(e){const t=new URLSearchParams(e??window.location.search);return Object.fromEntries(t.entries())},getElemClickedByClass:function(e,t){return e.classList.contains(t)?e:null!=e.closest(`.${t}`)?e.closest(`.${t}`):null}}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}(()=>{const e=n(11),t=n(215),{getQuerystringParams:a,getElemClickedByClass:r}=n(174);window.addEventListener("load",(async function(){s.init(),s.addCharacterGridListeners(),t.displayGridLoadingState({isLoading:!0});const n=a().page,{pageInfo:r,characters:o}=await e.fetchCharactersPage({page:n});t.renderGrid({characters:o}),t.preparePaginationButtons(r),t.displayGridLoadingState({isLoading:!1}),s.addModalListeners(),s.addPaginationListeners()}));const s=function(){const n=new Event("modalOpened"),a=new Event("modalClosed"),s=new Event("characterFetchError");return{init:function(){e.init({onFetchErrorCallback:()=>document.dispatchEvent(s)}),t.init({openModalCallback:()=>document.dispatchEvent(n),closeModalCallback:()=>document.dispatchEvent(a)})},addCharacterGridListeners:function(e){document.addEventListener("characterFetchError",(function(e){t.renderGrid({error:!0})}))},addModalListeners:function(){document.addEventListener("click",(async function(n){const a=r(n.target,"character-card");if(!a)return;t.renderModal("loading"),t.openModal();const s=a.getAttribute("data-character-id"),o=await e.fetchCharacter(s);t.renderModal("character",o)})),document.querySelector("#modal span.close").addEventListener("click",(function(e){t.closeModal()})),document.querySelector(".js-info-button").addEventListener("click",(function(e){e.stopPropagation(),t.openModal(),t.renderModal("info")})),document.addEventListener("modalOpened",(function(e){document.addEventListener("click",n)})),document.addEventListener("modalClosed",(function(e){document.removeEventListener("click",n)}));const n=function(e){const n=document.querySelector("#modal").classList.contains("opened")&&document.querySelector("#modal .modal-content").hasChildNodes(),a=r(e.target,"modal-inner");n&&!a&&t.closeModal()}},addPaginationListeners:function(){const e=function(e){const t=this.getAttribute("data-target-page");window.location.href=window.location.origin+window.location.pathname+"?page="+t};document.querySelectorAll(".js-previous").forEach((t=>t.addEventListener("click",e))),document.querySelectorAll(".js-next").forEach((t=>t.addEventListener("click",e)))}}}()})()})();